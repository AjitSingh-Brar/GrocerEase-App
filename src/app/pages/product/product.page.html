<app-navbar></app-navbar>

<ion-content [fullscreen]="true" scroll-y="false">
  <ion-grid class="product" aria-label="Pro duct Info">
    <ion-row class="product-info">
      <ion-col class="product-image" size="12" size-md="6">
        <img
          [src]="'assets/images/product/' + product?.photo"
          alt="croissant"
        />
      </ion-col>
      <ion-col class="product-description" size="12" size-md="6">
        <div class="product-section">
          <ion-title class="product-name">{{product?.productName}}</ion-title>
          <div class="product-details">{{product?.productDesc}}</div>
          <div class="product-price">$ {{product?.price | number:'1.2-2'}}</div>
          <div class="quantity">
            <ion-button class="minus" size="small" (click)="(decrement())">
              <ion-icon name="remove-outline"></ion-icon>
            </ion-button>
            <input type="text" value="{{quantity}}" id="qtyInput" />
            <ion-button class="plus" size="small" (click)="increment()">
              <ion-icon name="add-outline"></ion-icon>
            </ion-button>
          </div>
          <div class="addToCart">
            <ion-button size="default" color="secondary" (click)="addToCart()"
              >Add to Cart</ion-button
            >
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
  <hr />
  <div class="product-review">
    <div class="review-header">
      <div class="review-title">Product Reviews</div>
      <div>
        <ion-button id="open-addReview-modal" color="secondary"
          >Add Review</ion-button
        >
      </div>
    </div>
    <div class="ion-content-scroll-host">
      <ion-list>
        <ion-item *ngFor="let item of productReview">
          <app-product-review
            [itemData]="item"
            (editReview)="handleEditReview($event)"
            (deleteReview)="handleDeleteReview($event)"
          ></app-product-review>
        </ion-item>
      </ion-list>

      <ion-infinite-scroll
        (ionInfinite)="onIonInfinite($event)"
        [disabled]="items.length >= 5"
      >
        <ion-infinite-scroll-content
          loadingSpinner="bubbles"
          loadingText="Loading more data..."
        ></ion-infinite-scroll-content>
      </ion-infinite-scroll>
    </div>
  </div>

  <ion-modal
    trigger="open-addReview-modal"
    #addModal
    cssClass="custom-modal"
    (willDismiss)="onWillAdd($event)"
  >
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Add Product Review</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-input
            label="Name"
            labelPlacement="stacked"
            type="text"
            placeholder="Name"
            id="name"
          ></ion-input>
        </ion-item>
        <ion-item>
          <ion-input
            label="Review"
            labelPlacement="stacked"
            type="text"
            placeholder="Your review"
            id="review"
          ></ion-input>
        </ion-item>
        <div class="modal-buttons">
          <ion-button color="light" (click)="cancel()">Cancel</ion-button>
          <ion-button color="secondary" (click)="submit()" [strong]="true"
            >Submit</ion-button
          >
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-modal
    #reviewModal
    cssClass="custom-modal"
    (willDismiss)="onWillDismiss($event)"
  >
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Update your review</ion-title>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-input
            label="Edit your review"
            labelPlacement="stacked"
            type="text"
            placeholder="Your review"
            id="updatedReview"
          ></ion-input>
        </ion-item>
        <div class="modal-buttons">
          <ion-button color="light" (click)="close()">Cancel</ion-button>
          <ion-button color="secondary" (click)="confirm()" [strong]="true"
            >Confirm</ion-button
          >
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
